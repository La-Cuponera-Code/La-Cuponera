<!DOCTYPE html>
<html lang="es">
   <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta content="Codescandy" name="author">
      <title>Registrate en LaCuponera</title>
      <!-- Favicon icon-->
      <link rel="shortcut icon" type="image/png" href="../static/assets/cupon%20(2).png?ver=2.0">


      <!-- Libs CSS -->
      <link href="../plantilla/assets/libs/bootstrap-icons/font/bootstrap-icons.min.css" rel="stylesheet">
      <link href="../plantilla/assets/libs/feather-webfont/dist/feather-icons.css" rel="stylesheet">
      <link href="../plantilla/assets/libs/simplebar/dist/simplebar.min.css" rel="stylesheet">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

      <!-- Leaflet CSS -->
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">

      <!-- Custom CSS -->
      <link rel="stylesheet" href="../static/css/generales.css">
      <link rel="stylesheet" href="../static/css/registro_cuponero.css">

      <!-- Theme CSS -->
      <link rel="stylesheet" href="../plantilla/assets/css/theme.min.css">
   </head>

   <body>
      <div id="map"></div>
 
      <!-- Leaflet Script -->
      <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
      <script>
         document.addEventListener("DOMContentLoaded", function() {
               var defaultLat = 37.09024;
               var defaultLng = -95.712891;

               const map = L.map('map').setView([defaultLat, defaultLng], 4);
               const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                  maxZoom: 19,
                  attribution: ''
               }).addTo(map);

               const marker = L.marker([defaultLat, defaultLng], { draggable: true }).addTo(map)
   
               const circle = L.circle([defaultLat, defaultLng], {
                  color: 'red',
                  fillColor: '#f03',
                  fillOpacity: 0.5,
                  radius: 500
               }).addTo(map).bindPopup('');

               function updateCity(lat, lng) {
                  // Utilizar Nominatim para obtener la dirección
                  const nominatimUrl = `https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lng}`;

                  fetch(nominatimUrl)
                     .then(response => response.json())
                     .then(data => {
                           const ciudad = data.address.city || data.address.town || data.address.village || data.address.hamlet;
                           const pais = data.address.country;
                           document.getElementById('pais').innerText = pais;


                           document.getElementById('ciudad').innerText = ciudad;
                     })
                     .catch(error => console.error('Error al obtener la dirección:', error));
               }

               // Al mover el marcador
               marker.on('moveend', function (e) {
                  const latlng = e.target.getLatLng();
                  updateCity(latlng.lat, latlng.lng);
               });

               // Al cargar la página
               updateCity(defaultLat, defaultLng);

               if (navigator.geolocation) {
                  navigator.geolocation.getCurrentPosition(
                     function(position) {
                           var latitud = position.coords.latitude;
                           var longitud = position.coords.longitude;

                           map.setView([latitud, longitud], 13);
                           marker.setLatLng([latitud, longitud]);
                           circle.setLatLng([latitud, longitud]);

                           updateCity(latitud, longitud);
                     },
                     function(error) {
                           switch (error.code) {
                              case error.PERMISSION_DENIED:
                                 // El usuario rechazó la geolocalización, se mantiene la ubicación predeterminada
                                 break;
                              case error.POSITION_UNAVAILABLE:
                                 alert("La información de ubicación no está disponible.");
                                 break;
                              case error.TIMEOUT:
                                 alert("La solicitud para obtener la ubicación del usuario ha caducado.");
                                 break;
                              case error.UNKNOWN_ERROR:
                                 alert("Se produjo un error desconocido al intentar obtener la ubicación del usuario.");
                                 break;
                           }
                     }
                  );
               } else {
                  alert("La geolocalización no es compatible en este navegador.");
               }
         });
      </script>
      
      <div id="overlay">
         <!-- navigation -->
         <div class="border-bottom shadow-sm">
         <nav class="navbar navbar-light py-2">
            <div class="container justify-content-center justify-content-lg-between">
               <a class="navbar-brand" href="public.html">
               <img src="../static/assets/logo.png" alt="" class="d-inline-block align-text-top logo">
               </a>
               <span class="navbar-text" style="color: #e4d529;">
               ¿Ya tenés una cuenta? <a href="signin.html" style="color: #e4d529; font-weight: bold;">Iniciar sesión</a>
               </span>
            </div>
         </nav>
         </div>

         <main>
            <!-- section -->
            <section class="my-lg-6 my-8">
               <!-- container -->
               <div class="container">
                  <!-- row -->
                  <div class="row justify-content-center">
                     <div class="imagen col-12 col-md-4 col-lg-4 order-lg-1 order-2">
                        <!-- img -->
                        <!-- <img src="../static/assets/winwin/98108100-1488-4709-9c7e-ad21fecb4790.gif" alt="" class="img-fluid" /> -->
                     </div>
                     <!-- col -->
                     <div class="formulario col-12 col-md-8 offset-lg-1 col-lg-6 order-lg-2 order-1 align-self-center">
                        <div class="mb-lg-9 mb-5">
                           <h1 class="mb-1 h2 fw-bold">Empezá a conseguir cupones</h1>
                           <p>¡Bienvenido a La Cuponera! Ingresá tu correo electrónico para comenzar.</p>
                        </div>
                        <!-- form -->
                        <form class="needs-validation" novalidate>
                           <div class="row g-3">
                              <!-- col -->
                              <div class="col">
                                 <!-- input -->
                                 <label for="formSignupfname" class="form-label visually-hidden">Nombre</label>
                                 <input type="text" class="form-control" id="formSignupfname" placeholder="Nombre" required />
                                 <div class="invalid-feedback">Por favor, ingresá tu nombre</div>
                              </div>
                              <div class="col">
                                 <!-- input -->
                                 <label for="formSignuplname" class="form-label visually-hidden">Apellido</label>
                                 <input type="text" class="form-control" id="formSignuplname" placeholder="Apellido" required />
                                 <div class="invalid-feedback">Por favor, ingresá tu apellido</div>
                              </div>
                              <div class="col-12">
                                 <!-- input -->
                                 <label for="formSignupEmail" class="form-label visually-hidden">Email</label>
                                 <input type="email" class="form-control" id="formSignupEmail" placeholder="Correo electrónico" required />
                                 <div class="invalid-feedback">Por favor, ingresá tu mail</div>
                              </div>
                              <div class="col-12">
                                 <div class="password-field position-relative">
                                    <label for="formSignupPassword" class="form-label visually-hidden">Contraseña</label>
                                    <div class="password-field position-relative">
                                       <input type="password" class="form-control fakePassword" id="formSignupPassword" placeholder="********" required />
                                       <span><i class="bi bi-eye-slash passwordToggler"></i></span>
                                       <div class="invalid-feedback">Por favor, ingresá tu contraseña</div>
                                    </div>
                                 </div>
                              </div>
                              <!-- btn -->
                              <div class="col-12 d-grid">
                                 <a type="submit"  id="registro" href="index-2 (2).html" style="background-color:#F9ED48;border: none; color: black;"  class="btn btn-primary">
                                    Registrar
                                 </a>
                              </div>
                              <div class="registro-con">
                                 <div class="col-12 d-grid">
                                    <button type="button"  id="registro-google" class="btn btn-primary">
                                       <img src="../static/assets/icon-google.png">
                                       <p>Registrate con Google</p>
                                    </button>
                                 </div>
                                 <div class="col-12 d-grid">
                                    <button type="button"  id="registro-facebook" class="btn btn-primary">
                                       <img src="../static/assets/icon-face.png">
                                       <p>Registrate con Facebook</p>
                                    </button>
                                 </div>
                              </div>
                              
                              <!-- text -->
                              <p>
                                 <small>
                                    <a href="#!"  style=" color:#a79c03; font-weight: bold;">Términos de servicio</a>
                                    y
                                    <a href="#!"  style=" color:#a79c03; font-weight: bold;">Política de privacidad</a>
                                 </small>
                              </p>
                           </div>
                        </form>
                     </div>
                  </div>
               </div>
            </section>
         </main>
      </div>
         <script src="../plantilla/assets/js/vendors/validation.js?ver=3.4"></script>

         <!-- Javascript-->
         <!-- Libs JS -->
         <!-- <script src="../assets/libs/jquery/dist/jquery.min.js"></script> -->
         <script src="../plantilla/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
         <script src="../plantilla/assets/libs/simplebar/dist/simplebar.min.js"></script>

         <!-- Theme JS -->
         <script src="../plantilla/assets/js/theme.min.js"></script>

         <script src="../plantilla/assets/js/vendors/password.js"></script>
   </body>
</html>
